<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head th:replace="fragments :: head"></head>
<body class="bg-info">
    <nav th:replace="fragments :: nav"></nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-2 bg-dark">
                <div class="text-white mt-4">
                    <h4>Filter</h4>
                    <form method="POST">
                        <label>Date between:</label>
                        <input type="date"/>
                        <label>and</label>
                        <input type="date"/>
                        <label>By Customer</label>
                        <select>
                            <option value="0">Customer1</option>
                        </select>
                        <label>By assigned technician</label>
                        <select>
                            <option value="0">Technician1</option>
                        </select>
                        <label>By status</label>
                        <select>
                            <option value="0">CREATED</option>
                        </select>
                        <label>By Address</label>
                        <label>By Phone Number</label>
                        <label>By Contact</label>
                        <label>By Time</label>
                    </form>
                </div>
            </div>
            <div class="col-10">
                <div class="container">
                    <div class="row">
                        <div class="col"></div>
                        <div class="col-8">
                            <div class="card text-white bg-dark my-4" th:each="workOrder : ${workOrders}">
                                <div class="card-body">
                                    <div class="text-right">
                                        <a th:href="@{|/workOrder/edit/${workOrder.id}}" class="btn-sm btn-primary oi oi-pencil"></a>
                                    </div>
                                    <h3 class="card-title" th:text="${workOrder.customer.name}"></h3>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col">
                                                <h5>Date</h5>
                                            </div>
                                            <div class="col">
                                                <span th:text="|${#dates.dayOfWeekName(workOrder.date)}, ${#dates.monthName(workOrder.date)} ${#dates.day(workOrder.date)} ${#dates.year(workOrder.date)}"></span>
                                            </div>
                                            <div class="col">
                                                <h5>Time</h5>
                                            </div>
                                            <div class="col">
                                                <span th:text="|${#dates.format(workOrder.startTime, 'hh:mm a')} - ${#dates.format(workOrder.endTime, 'hh:mm a')}"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <h5>Address</h5>
                                                <span th:text="${workOrder.customer.address}"></span>
                                            </div>
                                            <div class="col">
                                                <h5>Contact</h5>
                                                <span th:text="${workOrder.customer.contact}"></span>
                                                <h5>Phone Number</h5>
                                                <span th:text="${workOrder.customer.phoneNumber}"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <h5>Description</h5>
                                                <span th:text="${workOrder.description}"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <div class="embed-responsive embed-responsive-16by9 mt-2">
                                                    <iframe class="embed-responsive-item"
                                                            th:src="@{|https://www.google.com/maps/embed/v1/place?key=API_KEY
                                                         &q=${#strings.replace(workOrder.customer.address, ' ', '+')}}"></iframe>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-2">
                                            <div th:unless="${workOrder.technicians.size()}" class="col text-left">
                                                <a class="btn btn-primary" th:href="@{|/workOrders/assign/${workOrder.id}}">Assign</a>
                                            </div>
                                            <div th:if="${workOrder.technicians.size()}" class="col text-left">
                                                <h5>Assigned Technicians</h5>
                                                <span th:each="technician : ${workOrder.technicians}" th:text="${technician.username}"></span>
                                            </div>
                                            <div th:if="${workOrder.technicians.size()}" class="col text-right">
                                                <h5 th:text="|Status: ${#strings.capitalize(#strings.toLowerCase(workOrder.status))}"></h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <section th:replace="fragments :: javascript"></section>
</body>
</html>